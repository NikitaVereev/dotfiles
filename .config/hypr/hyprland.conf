source = $HOME/.config/hypr/wallust/wallust-hyprland.conf

################
### MONITORS ###
################


###################
### MY PROGRAMS ###
###################

$terminal = kitty
$fileManager = thunar
$menu = rofi -show drun
$browser = firefox


#################
### AUTOSTART ###
#################

exec-once = waybar -c ~/.config/waybar/config.json & swww-daemon & swaync


#############################
### ENVIRONMENT VARIABLES ###
#############################

env = XCURSOR_SIZE,24
env = HYPRCURSOR_SIZE,24


#####################
### LOOK AND FEEL ###
#####################

general {
    gaps_in = 4
    gaps_out = 6
    border_size = 2
    col.active_border = $color12 
    col.inactive_border = $background 
    resize_on_border = false
    allow_tearing = false
    layout = dwindle
}

decoration {
    rounding = 10
    rounding_power = 3

    active_opacity = 1.0
    inactive_opacity = 1.0

    dim_inactive = false
    dim_strength = 0.1
    dim_special = 0.8

    shadow {
        enabled = false
        range = 4
        render_power = 3
        color = rgba(1a1a1aee)
    }

    blur {
        enabled = true
        size = 6
        passes = 3
        noise = 0.0200
        vibrancy = 0.1796
        ignore_opacity = true
        new_optimizations = true
        xray = true
        special = true
        popups = true
    }
}

$interval=6.9
$curve=easeOut

animations {
  enabled = true
  bezier = default, 0, 1, 0, 1
  bezier = wind, 0.05, 0.69, 0.1, 1
  bezier = winIn, 0.1, 1.1, 0.1, 1
  bezier = winOut, 0.3, 1, 0, 1
  bezier = linear, 1, 1, 1, 1

  bezier = easeOut, 0.16, 1, 0.3, 1

  # animation=NAME,ONOFF,SPEED,CURVE,STYLE
  animation = windows, 1, $interval, $curve, slide
  animation = windowsIn, 1, $interval, $curve, popin 90%
  animation = windowsOut, 1, $interval, $curve, popin 80%
  animation = windowsMove, 1, $interval, $curve, slide
  # animation = border, 1, 1, linear
  # animation = borderangle, 1, 180, linear, loop #used by rainbow borders and rotating colors
  animation = fade, 1, 10, default
  animation = workspaces, 1, 10, $curve, slide

  animation = layers, 1, 6.9, $curve, slide

}

dwindle {
    pseudotile = true 
    preserve_split = true 
    special_scale_factor = 0.8
}

master {
    new_status = master
    new_on_top = 1
    mfact = 0.5
}

misc {
    force_default_wallpaper = -1 
    disable_hyprland_logo = false 
}

#############
### INPUT ###
#############

input {
    kb_layout = us,ru
    kb_variant =
    kb_model =
    kb_options = grp:win_space_toggle
    kb_rules =
    follow_mouse = 1
    sensitivity = -0.1 
    touchpad {
        natural_scroll = true
    }
}

device {
    name = epic-mouse-v1
    sensitivity = -0.5
}

###################
### KEYBINDINGS ###
###################

source = ~/.config/hypr/keybind.conf

##############################
### WINDOWS AND WORKSPACES ###
##############################

# --- 1. TAG DEFINITIONS ---

windowrule {
    name = browser-tag
    tag = +browser
    match:class = ^([Cc]hromium|[Ff]irefox|[Bb]rave-browser)$
}

windowrule {
    name = terminal-tag
    tag = +terminal
    match:class = ^([Kk]itty|[Aa]lacritty)$
}

windowrule {
    name = filemanager-tag
    tag = +file-manager
    match:class = ^([Tt]hunar)$
}

windowrule {
    name = im-tag
    tag = +im
    match:class = ^(telegram-desktop|[Dd]iscord|[Ww]ebCord)$
}

windowrule {
    name = projects-tag
    tag = +projects
    match:class = ^(Code|VSCodium|neovide|jetbrains-.+)$
}

windowrule {
    name = games-tag
    tag = +games
    match:class = ^(gamescope|steam_app_\d+)$
}

# --- 2. TAG LOGIC ---

# windowrule {
#     name = workspace-terminal
#     workspace = 1
#     match:tag = terminal*
# }
#
# windowrule {
#     name = workspace-browser
#     workspace = 2
#     match:tag = browser*
# }
#
# windowrule {
#     name = workspace-files
#     workspace = 3
#     match:tag = file-manager*
# }
#
# windowrule {
#     name = workspace-im
#     workspace = 4
#     match:tag = im*
# }
#
# windowrule {
#     name = workspace-projects
#     workspace = 5
#     match:tag = projects*
# }

# --- Opacity ---
windowrule {
    name = opacity-browser
    opacity = 1.0 1.0
    match:tag = browser*
}

windowrule {
    name = opacity-im
    opacity = 0.85 0.85
    match:tag = im*
}

windowrule {
    name = opacity-files
    opacity = 0.9 0.8
    match:tag = file-manager*
}

windowrule {
    name = opacity-term
    opacity = 0.8 0.8
    match:tag = terminal*
}

# --- 3. SMART RULES ---

windowrule {
    name = smart-popups
    float = 1
    size = 70% 60%
    center = 1
    match:title = ^(Save As|Open File|Open Files)$
}

windowrule {
    name = auth-popups
    float = 1
    center = 1
    match:title = ^(Authentication Required)$
}

windowrule {
    name = thunar-dialogs
    float = 1
    center = 1
    match:class = ([Tt]hunar)
    match:title = negative:(.*[Tt]hunar.*)
}

windowrule {
    name = pip
    float = 1
    pin = 1
    move = 72% 7%
    size = 25% 25%
    match:title = ^(Picture-in-Picture)$
}

windowrule {
    name = idle-fullscreen
    idle_inhibit = fullscreen
    match:fullscreen = 1
}

windowrule {
    name = suppress-maximize
    suppress_event = maximize
    match:class = .*
}

windowrule {
    name = games-logic
    fullscreen = 1
    workspace = 2
    match:tag = games*
}

# --- 4. LAYER RULES ---

layerrule {
    name = waybar-blur
    blur = 1
    ignore_alpha = 0.5
    match:namespace = waybar
}

layerrule {
    name = rofi-anim
    animation = popin 95%
    match:namespace = rofi
}

layerrule {
    name = swaync-blur
    blur = 1
    ignore_alpha = 0
    match:namespace = swaync-control-center
}

layerrule {
    name = swaync-notif-blur
    blur = 1
    ignore_alpha = 0
    match:namespace = swaync-notification-window
}

###################
### LOCAL CONFIG ###
###################

source = ~/.config/hypr/local.conf
